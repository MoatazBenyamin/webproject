<nav class="navbar is-dark" id="navbarapp">
    <div class="navbar-brand">
        <a class="navbar-item" href="http://localhost:8080/">Greatest Watches</a>

        <a @click="toggleMenu()" role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="main-navbar">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
    </div>

    <div id="main-navbar" class="navbar-menu" :class="{ 'is-active': menuClass }">
        <div class="navbar-start">
            <div class="navbar-item">
                <form method="get" action="localhost:8080/search">
                    <div class="field has-addons">
                        <div class="control">
                            <input type="text" class="input" placeholder="Search..." name="query">
                        </div>
                        <div class="control">
                            <button class="button is-success">Search</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div class="navbar-end">
            {% for category in menu_categories %}
                {% if not category.children.all %}
                    <a href="{% url 'category_detail' category.slug %}" class="navbar-item">{{ category.title }}</a>
                {% else %}
                    <div class="navbar-item has-dropdown is-hoverable">
                        <a href="{% url 'category_detail' category.slug %}" class="navbar-link">{{ category.title }}</a>
                    
                        <div class="navbar-dropdown">
                            {% for subcategory in category.children.all %}
                                <a href="{% url 'category_detail' subcategory.slug %}" class="navbar-item">{{ subcategory.title }}</a>
                            {% endfor %}
                        </div>
                    </div>
                {% endif %}		
            {% endfor %}
            
            <div class="navbar-item">
                <a href="http://localhost:8080/cart" class="button is-primary"> Cart </a>
            </div>

            {% if request.user.is_authenticated %}
                <div class="navbar-item">
                    <a href="http://localhost:8080/my-account" class="button is-light">My account</a>
                </div>
            {% else %}
                <div class="navbar-item">
                    <div class="buttons">
                        <a href="http://localhost:8080/sign-up" class="button is-primary"><strong>Sign up</strong></a>
                        <a href="http://localhost:8080/log-in" class="button is-light">Log in</a>
                    </div>
                </div>
            {% endif %}
        </div>
    </div>
</nav>
